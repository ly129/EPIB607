<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>MATH 697</title>
  <meta name="description" content="Course material for MATH 697">
  <meta name="generator" content="bookdown 0.4 and GitBook 2.6.7">

  <meta property="og:title" content="MATH 697" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Course material for MATH 697" />
  <meta name="github-repo" content="sahirbhatnagar/MATH697" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="MATH 697" />
  
  <meta name="twitter:description" content="Course material for MATH 697" />
  

<meta name="author" content="Sahir Rai Bhatnagar">


<meta name="date" content="2017-09-05">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="probability.html">
<link rel="next" href="appendix-b.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MATH 697</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Syllabus</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#general-information"><i class="fa fa-check"></i>General Information</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i>Course Description</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#grade-distribution"><i class="fa fa-check"></i>Grade Distribution</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#target-syllabus"><i class="fa fa-check"></i>Target Syllabus</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#overview-and-descriptive-statistics-weeks-1-4"><i class="fa fa-check"></i>Overview and Descriptive Statistics (Weeks 1-4)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#probability-weeks-1-4"><i class="fa fa-check"></i>Probability (Weeks 1-4)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#discrete-random-variables-and-probability-distributions-weeks-1-4"><i class="fa fa-check"></i>Discrete Random Variables and Probability Distributions (Weeks 1-4)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#continuous-random-variables-and-probability-distributions-weeks-5-8"><i class="fa fa-check"></i>Continuous Random Variables and Probability Distributions (Weeks 5-8)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#joint-probability-distributions-weeks-5-8"><i class="fa fa-check"></i>Joint Probability Distributions (Weeks 5-8)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#statistics-and-sampling-distributions-weeks-5-8"><i class="fa fa-check"></i>Statistics and Sampling Distributions (Weeks 5-8)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#point-estimation-weeks-9-12"><i class="fa fa-check"></i>Point Estimation (Weeks 9-12)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#statistical-intervals-based-on-a-single-sample-weeks-9-12"><i class="fa fa-check"></i>Statistical Intervals Based on a Single Sample (Weeks 9-12)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#tests-of-hypotheses-based-on-a-single-sample-weeks-9-12"><i class="fa fa-check"></i>Tests of Hypotheses Based on a Single Sample (Weeks 9-12)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i>Prerequisites</a><ul>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#install-r-and-rstudio"><i class="fa fa-check"></i>Install R and RStudio</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#r-packages"><i class="fa fa-check"></i>R Packages</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#introduction-to-r"><i class="fa fa-check"></i>Introduction to R</a></li>
<li class="chapter" data-level="" data-path="prerequisites.html"><a href="prerequisites.html#background-reading"><i class="fa fa-check"></i>Background Reading</a></li>
</ul></li>
<li class="part"><span><b>I Part I</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Overview and Descriptive Statistics</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#populations-and-samples"><i class="fa fa-check"></i><b>1.1</b> Populations and Samples</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#variable"><i class="fa fa-check"></i><b>1.1.1</b> Variable</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#branches-of-statistics"><i class="fa fa-check"></i><b>1.1.2</b> Branches of Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#pictorial-and-tabular-methods-in-descriptive-statistics"><i class="fa fa-check"></i><b>1.2</b> Pictorial and Tabular Methods in Descriptive Statistics</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#measures-of-location"><i class="fa fa-check"></i><b>1.3</b> Measures of Location</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#measures-of-variability"><i class="fa fa-check"></i><b>1.4</b> Measures of Variability</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>2</b> Probability</a><ul>
<li class="chapter" data-level="2.1" data-path="probability.html"><a href="probability.html#introduction1"><i class="fa fa-check"></i><b>2.1</b> Introduction</a><ul>
<li class="chapter" data-level="2.1.1" data-path="probability.html"><a href="probability.html#probability-a-measure-of-uncertainty2"><i class="fa fa-check"></i><b>2.1.1</b> Probability: A Measure of Uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="probability.html"><a href="probability.html#sample-spaces-and-events"><i class="fa fa-check"></i><b>2.2</b> Sample Spaces and Events</a><ul>
<li class="chapter" data-level="2.2.1" data-path="probability.html"><a href="probability.html#sample-spaces"><i class="fa fa-check"></i><b>2.2.1</b> Sample Spaces</a></li>
<li class="chapter" data-level="2.2.2" data-path="probability.html"><a href="probability.html#events"><i class="fa fa-check"></i><b>2.2.2</b> Events</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>R Tutorial</b></span></li>
<li class="chapter" data-level="A" data-path="vectorization-apply-and-for-loops.html"><a href="vectorization-apply-and-for-loops.html"><i class="fa fa-check"></i><b>A</b> Vectorization, *apply and for loops</a><ul>
<li class="chapter" data-level="A.1" data-path="vectorization-apply-and-for-loops.html"><a href="vectorization-apply-and-for-loops.html#vectorization"><i class="fa fa-check"></i><b>A.1</b> Vectorization</a></li>
<li class="chapter" data-level="A.2" data-path="vectorization-apply-and-for-loops.html"><a href="vectorization-apply-and-for-loops.html#family-of-apply-functions"><i class="fa fa-check"></i><b>A.2</b> Family of <code>*apply</code> functions</a><ul>
<li class="chapter" data-level="A.2.1" data-path="vectorization-apply-and-for-loops.html"><a href="vectorization-apply-and-for-loops.html#loops-vs.apply"><i class="fa fa-check"></i><b>A.2.1</b> Loops vs. Apply</a></li>
<li class="chapter" data-level="A.2.2" data-path="vectorization-apply-and-for-loops.html"><a href="vectorization-apply-and-for-loops.html#descriptive-statistics-using-apply"><i class="fa fa-check"></i><b>A.2.2</b> Descriptive Statistics using <code>*apply</code></a></li>
<li class="chapter" data-level="A.2.3" data-path="vectorization-apply-and-for-loops.html"><a href="vectorization-apply-and-for-loops.html#creating-new-columns-using-sapply"><i class="fa fa-check"></i><b>A.2.3</b> Creating new columns using <code>sapply</code></a></li>
<li class="chapter" data-level="A.2.4" data-path="vectorization-apply-and-for-loops.html"><a href="vectorization-apply-and-for-loops.html#applying-functions-to-subsets-using-tapply"><i class="fa fa-check"></i><b>A.2.4</b> Applying functions to subsets using <code>tapply</code></a></li>
<li class="chapter" data-level="A.2.5" data-path="vectorization-apply-and-for-loops.html"><a href="vectorization-apply-and-for-loops.html#nested-for-loops-using-mapply"><i class="fa fa-check"></i><b>A.2.5</b> Nested for loops using <code>mapply</code></a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="vectorization-apply-and-for-loops.html"><a href="vectorization-apply-and-for-loops.html#creating-dynamic-documents-with-mapply"><i class="fa fa-check"></i><b>A.3</b> Creating dynamic documents with <code>mapply</code></a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-b.html"><a href="appendix-b.html"><i class="fa fa-check"></i><b>B</b> Appendix B</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">MATH 697</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vectorization-apply-and-for-loops" class="section level1">
<h1><span class="header-section-number">A</span> Vectorization, *apply and for loops</h1>
<p>This section will cover the basics of vectorizations, the <code>*apply</code> family of functions and <code>for</code> loops.</p>
<div id="vectorization" class="section level2">
<h2><span class="header-section-number">A.1</span> Vectorization</h2>
<p>Almost everything in <code>R</code> is a vector. A scalar is really a vector of length 1 and a <code>data.frame</code> is a collection of vectors. An nice feature of  is its vectorized capabilities. Vectorization indicates that a function operates on a whole vector of values at the same time and not just on a single value<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>. If you have have ever taken a basic linear algebra course, this concept will be familiar to you.   Take for example two vectors:  <span class="math display">\[
\begin{bmatrix} 1 \\ 2 \\ 3 \end{bmatrix} + 
\begin{bmatrix} 1 \\ 2 \\ 3 \end{bmatrix} =
\begin{bmatrix} 2 \\ 4 \\ 6 \end{bmatrix}
\]</span>   The corresponding <code>R</code> code is given by:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)
b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)
a <span class="op">+</span><span class="st"> </span>b</code></pre></div>
<pre><code>## [1] 2 4 6</code></pre>
<p>Many of the <code>base</code> functions in <code>R</code> are already vectorized. Here are some common examples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># generate a sequence of numbers from 1 to 10</span>
(a &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># sum the numbers from 1 to 10</span>
<span class="kw">sum</span>(a)</code></pre></div>
<pre><code>## [1] 55</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate sums of each column</span>
<span class="kw">colSums</span>(iris[, <span class="op">-</span><span class="dv">5</span>])</code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##        876.5        458.6        563.7        179.9</code></pre>
<blockquote>
<p><strong>Exercise</strong>: What happens when you sum two vectors of different lengths?</p>
</blockquote>
</div>
<div id="family-of-apply-functions" class="section level2">
<h2><span class="header-section-number">A.2</span> Family of <code>*apply</code> functions</h2>
<ul>
<li><code>apply</code>, <code>lapply</code> and <code>sapply</code> are some of the most commonly used class of functions in <code>R</code></li>
<li><code>*apply</code> functions are not necessarily faster than loops, but can be easier to read (and vice cersa)</li>
<li><code>apply</code> is used when you need to perform an operation on every row or column of a matrix or data.frame</li>
<li><code>lapply</code> and <code>sapply</code> differ in the format of the output. The former returns a list while the ladder returns a vector</li>
<li>There are other <code>*apply</code> functions such as <code>tapply</code>, <code>vapply</code> and <code>mapply</code> with similar functionality and purpose</li>
</ul>
<div id="loops-vs.apply" class="section level3">
<h3><span class="header-section-number">A.2.1</span> Loops vs. Apply</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Getting the row means of two columns Generate data</span>
N &lt;-<span class="st"> </span><span class="dv">10000</span>
x1 &lt;-<span class="st"> </span><span class="kw">runif</span>(N)
x2 &lt;-<span class="st"> </span><span class="kw">runif</span>(N)
d &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">cbind</span>(x1, x2))
<span class="kw">head</span>(d)</code></pre></div>
<pre><code>##           x1        x2
## 1 0.33092222 0.7447474
## 2 0.50108759 0.8885564
## 3 0.73776118 0.4313797
## 4 0.61081970 0.3718305
## 5 0.16821849 0.8226250
## 6 0.08465941 0.7163170</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Loop: create a vector to store the results in</span>
rowMeanFor &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, N)

<span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_len</span>(N)) {
    rowMeanFor[[i]] &lt;-<span class="st"> </span><span class="kw">mean</span>(<span class="kw">c</span>(d[i, <span class="dv">1</span>], d[i, <span class="dv">2</span>]))
}

<span class="co"># Apply:</span>
rowMeanApply &lt;-<span class="st"> </span><span class="kw">apply</span>(d, <span class="dv">1</span>, mean)

<span class="co"># are the results equal</span>
<span class="kw">all.equal</span>(rowMeanFor, rowMeanApply)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="descriptive-statistics-using-apply" class="section level3">
<h3><span class="header-section-number">A.2.2</span> Descriptive Statistics using <code>*apply</code></h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(women)
<span class="co"># data structure</span>
<span class="kw">str</span>(women)</code></pre></div>
<pre><code>## &#39;data.frame&#39;:    15 obs. of  2 variables:
##  $ height: num  58 59 60 61 62 63 64 65 66 67 ...
##  $ weight: num  115 117 120 123 126 129 132 135 139 142 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate the mean for each column</span>
<span class="kw">apply</span>(women, <span class="dv">2</span>, mean)</code></pre></div>
<pre><code>##   height   weight 
##  65.0000 136.7333</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># apply &#39;fivenum&#39; function to each column</span>
<span class="kw">vapply</span>(women, fivenum, <span class="kw">c</span>(<span class="dt">Min. =</span> <span class="dv">0</span>, <span class="st">`</span><span class="dt">1st Qu.</span><span class="st">`</span> =<span class="st"> </span><span class="dv">0</span>, <span class="dt">Median =</span> <span class="dv">0</span>, <span class="st">`</span><span class="dt">3rd Qu.</span><span class="st">`</span> =<span class="st"> </span><span class="dv">0</span>, 
    <span class="dt">Max. =</span> <span class="dv">0</span>))</code></pre></div>
<pre><code>##         height weight
## Min.      58.0  115.0
## 1st Qu.   61.5  124.5
## Median    65.0  135.0
## 3rd Qu.   68.5  148.0
## Max.      72.0  164.0</code></pre>
</div>
<div id="creating-new-columns-using-sapply" class="section level3">
<h3><span class="header-section-number">A.2.3</span> Creating new columns using <code>sapply</code></h3>
<p>You can apply a <em>user defined function</em> to columns or the entire data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># the ouput of sapply is a vector the &#39;s&#39; in sapply stands for &#39;simplified&#39;</span>
<span class="co"># apply</span>
mtcars<span class="op">$</span>gear2 &lt;-<span class="st"> </span><span class="kw">sapply</span>(mtcars<span class="op">$</span>gear, <span class="cf">function</span>(i) <span class="cf">if</span> (i <span class="op">==</span><span class="st"> </span><span class="dv">4</span>) <span class="st">&quot;alot&quot;</span> <span class="cf">else</span> <span class="st">&quot;some&quot;</span>)

<span class="kw">head</span>(mtcars)[, <span class="kw">c</span>(<span class="st">&quot;gear&quot;</span>, <span class="st">&quot;gear2&quot;</span>)]</code></pre></div>
<pre><code>##                   gear gear2
## Mazda RX4            4  alot
## Mazda RX4 Wag        4  alot
## Datsun 710           4  alot
## Hornet 4 Drive       3  some
## Hornet Sportabout    3  some
## Valiant              3  some</code></pre>
</div>
<div id="applying-functions-to-subsets-using-tapply" class="section level3">
<h3><span class="header-section-number">A.2.4</span> Applying functions to subsets using <code>tapply</code></h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fisher&#39;s famous dataset</span>
<span class="kw">data</span>(iris)
<span class="kw">str</span>(iris)</code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># mean sepal length by species</span>
<span class="kw">tapply</span>(iris<span class="op">$</span>Sepal.Length, iris<span class="op">$</span>Species, mean)</code></pre></div>
<pre><code>##     setosa versicolor  virginica 
##      5.006      5.936      6.588</code></pre>
</div>
<div id="nested-for-loops-using-mapply" class="section level3">
<h3><span class="header-section-number">A.2.5</span> Nested for loops using <code>mapply</code></h3>
<p><code>mapply</code> is my favorite <code>base</code> <code>R</code> function and here are some reasons why:</p>
<ul>
<li>Using <code>mapply</code> is equivalent to writing nested <code>for</code> loops except that it is 100% more human readable and less prone to errors</li>
<li>It is an effective way of conducting simulations because it iterates of many arguments</li>
</ul>
<p>Let’s say you want to generate random samples from a normal distribution with varying means and standard deviations. Of course the brute force way would be to write out the command once, copy paste as many times as you want, and then manually change the arguments for <code>mean</code> and <code>sd</code> in the <code>rnorm</code> function as so:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v1 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dt">mean =</span> <span class="dv">5</span>, <span class="dt">sd =</span> <span class="dv">1</span>)
v2 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="dv">5</span>)
v3 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dt">mean =</span> <span class="op">-</span><span class="dv">3</span>, <span class="dt">sd =</span> <span class="dv">10</span>)</code></pre></div>
<p>This isn’t too bad for three vectors. But what if you want to generate many more combinations of means and sds ? Furthermore, how can you keep track of the parameters you used? Now lets consider the <code>mapply</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">means &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="op">-</span><span class="dv">3</span>)
sds &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>)

<span class="co"># MoreArgs is a list of arguments that dont change</span>
randomNormals &lt;-<span class="st"> </span><span class="kw">mapply</span>(rnorm, <span class="dt">mean =</span> means, <span class="dt">sd =</span> sds, <span class="dt">MoreArgs =</span> <span class="kw">list</span>(<span class="dt">n =</span> <span class="dv">100</span>))

<span class="kw">head</span>(randomNormals)</code></pre></div>
<pre><code>##          [,1]      [,2]        [,3]
## [1,] 5.675456  4.865048  -6.2332404
## [2,] 2.634576  8.262338   3.4304285
## [3,] 4.581335 10.949912  -7.3553875
## [4,] 5.324288 16.917329   3.1616172
## [5,] 5.282263  8.674564   0.8546586
## [6,] 5.856334  9.849042 -14.2067405</code></pre>
<p>The following diagram (from <a href="http://r4ds.had.co.nz/iteration.html#mapping-over-multiple-arguments">r4ds</a>) describes exactly what is going on in the above function call to <code>mapply</code>:</p>
<div class="figure">
<img src="images/mapply.png" />

</div>
<p>Advantages:</p>
<ol style="list-style-type: decimal">
<li>Result is automatically stored in a matrix</li>
<li>The parameters are also saved in <code>R</code> objects so that they can be easily manipulated and/or recovered</li>
</ol>
<p>Consider a more complex scenario where you want to consider many possible combinations of means and sds. We take advantage of the <code>expand.grid</code> function to create a <code>data.frame</code> of simulation parameters:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">simParams &lt;-<span class="st"> </span><span class="kw">expand.grid</span>(<span class="dt">means =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">sds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)

randomNormals &lt;-<span class="st"> </span><span class="kw">mapply</span>(rnorm, <span class="dt">mean =</span> simParams<span class="op">$</span>means, <span class="dt">sd =</span> simParams<span class="op">$</span>sds, <span class="dt">MoreArgs =</span> <span class="kw">list</span>(<span class="dt">n =</span> <span class="dv">100</span>))

<span class="kw">dim</span>(randomNormals)</code></pre></div>
<pre><code>## [1] 100 100</code></pre>
</div>
</div>
<div id="creating-dynamic-documents-with-mapply" class="section level2">
<h2><span class="header-section-number">A.3</span> Creating dynamic documents with <code>mapply</code></h2>
<p><code>mapply</code> together with the <code>rmarkdown</code> package <span class="citation">(Allaire et al. <a href="#ref-R-rmarkdown">2017</a>)</span> can be very useful to create dynamic documents for exploratory analysis. We illustrate this using the Motor Trend Car Road Tests data which comes pre-loaded in <code>R</code>.</p>
<blockquote>
<p>The data was extracted from the 1974 Motor Trend US magazine, and comprises fuel consumption and 10 aspects of automobile design and performance for 32 automobiles (1973–74 models).</p>
</blockquote>
<p>Copy the code below in a file called <code>mapplyRmarkdown.Rmd</code> :</p>
<script src="https://gist.github.com/sahirbhatnagar/d2264c64b0213308dfaa537af1bfd9a7.js"></script>
<p>Copy the code below in a file called <code>boxplotTemplate</code> :</p>
<script src="https://gist.github.com/sahirbhatnagar/4db246dd767eabb204eead836b29cd44.js"></script>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-rmarkdown">
<p>Allaire, JJ, Joe Cheng, Yihui Xie, Jonathan McPherson, Winston Chang, Jeff Allen, Hadley Wickham, Aron Atkins, Rob Hyndman, and Ruben Arslan. 2017. <em>Rmarkdown: Dynamic Documents for R</em>. <a href="https://CRAN.R-project.org/package=rmarkdown" class="uri">https://CRAN.R-project.org/package=rmarkdown</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="4">
<li id="fn4"><p><a href="http://www.dummies.com/how-to/content/how-to-vectorize-your-functions-in-r.html" class="uri">http://www.dummies.com/how-to/content/how-to-vectorize-your-functions-in-r.html</a><a href="vectorization-apply-and-for-loops.html#fnref4">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="probability.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix-b.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sahirbhatnagar/MATH697/edit/master/05-Rtutorial.Rmd",
"text": "Edit"
},
"download": ["math697.pdf", "math697.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
